import{r as l,o as i,c as r,a as e,b as n,F as s,e as d,d as a}from"./app.1c49a48c.js";import{_ as o}from"./plugin-vue_export-helper.21dcd24c.js";const p={},u=d(`<p>GAE \u306E Datastore \u306B\u3064\u3044\u3066\u3056\u3063\u304F\u308A</p><h2 id="overview" tabindex="-1"><a class="header-anchor" href="#overview" aria-hidden="true">#</a> Overview</h2><ul><li>\u30B9\u30AD\u30FC\u30DE\u306E\u306A\u3044\u30AA\u30D6\u30B8\u30A7\u30AF\u30C8\u30C7\u30FC\u30BF\u30D9\u30FC\u30B9</li><li>\u30AA\u30FC\u30C8\u30B9\u30B1\u30FC\u30EA\u30F3\u30B0</li><li>\u30C7\u30A3\u30B9\u30AF\u3078\u306E\u66F8\u304D\u8FBC\u307F\u6642\u306B\u81EA\u52D5\u3067\u6697\u53F7\u5316\u3001\u8AAD\u307F\u51FA\u3057\u6642\u306B\u81EA\u52D5\u3067\u5FA9\u53F7</li><li>\u8A08\u753B\u7684\u30C0\u30A6\u30F3\u30BF\u30A4\u30E0\u306A\u3057</li></ul><table><thead><tr><th>Concept</th><th>Cloud Datastore</th><th>Relational database</th></tr></thead><tbody><tr><td>\u30AA\u30D6\u30B8\u30A7\u30AF\u30C8\u304C\u6240\u5C5E\u3059\u308B\u30AB\u30C6\u30B4\u30EA</td><td>Kind</td><td>Table</td></tr><tr><td>\u30AA\u30D6\u30B8\u30A7\u30AF\u30C8</td><td>Entity</td><td>Row</td></tr><tr><td>\u30AA\u30D6\u30B8\u30A7\u30AF\u30C8\u304C\u3082\u3064\u30C7\u30FC\u30BF</td><td>Property</td><td>Field</td></tr><tr><td>\u30AA\u30D6\u30B8\u30A7\u30AF\u30C8\u3092\u7279\u5B9A\u3059\u308B ID</td><td>Key</td><td>Primary key</td></tr></tbody></table><ul><li>\u540C\u4E00 kind \u306E entity \u3067\u3082\u9055\u3046 property \u3092\u6301\u3061\u3046\u308B</li><li>\u305D\u308C\u305E\u308C\u306E entity \u306F\u540C\u540D\u306E property \u3067\u3082\u578B\u306E\u9055\u3046\u30C7\u30FC\u30BF\u3092\u6301\u3061\u3046\u308B</li></ul><h3 id="other-storages" tabindex="-1"><a class="header-anchor" href="#other-storages" aria-hidden="true">#</a> Other storages</h3><ul><li>\u8907\u6570\u306E table \u306E join \u3084 \u8907\u6570\u306E\u30AB\u30E9\u30E0\u306B\u5BFE\u3059\u308B\u4E0D\u7B49\u53F7\u6BD4\u8F03\u306A\u3069\u3001\u3059\u3079\u3066\u306E SQL \u64CD\u4F5C\u304C\u5FC5\u8981\u306A\u3089 Google Cloud SQL</li><li>ACID transaction \u3092\u5FC5\u8981\u3068\u3057\u306A\u3044\u30B9\u30AD\u30FC\u30DE\u30EC\u30B9\u306A\u30C7\u30FC\u30BF\u3092\u6271\u3046\u306A\u3089 Google Bigtable</li><li>\u30AA\u30F3\u30E9\u30A4\u30F3\u3067\u5206\u6790\u3055\u308C\u308B\u30C7\u30FC\u30BF\u3092\u6271\u3046\u306A\u3089 Google BigQuery</li><li>\u753B\u50CF\u3084\u52D5\u753B\u306A\u3069\u306E\u5909\u66F4\u304C\u306A\u3044\u5927\u304D\u306A\u30C7\u30FC\u30BF\u3092\u6271\u3046\u306A\u3089 Google Cloud Storage</li></ul><h2 id="entities" tabindex="-1"><a class="header-anchor" href="#entities" aria-hidden="true">#</a> Entities</h2><ul><li>\u3072\u3068\u3064\u306E entity \u306F1\u3064\u4EE5\u4E0A\u306E property \u3092\u3082\u3064</li><li>property \u306F1\u3064\u4EE5\u4E0A\u306E\u5024\u3092\u53D6\u308A\u3046\u308B</li></ul><h2 id="keys" tabindex="-1"><a class="header-anchor" href="#keys" aria-hidden="true">#</a> Keys</h2><ul><li>key \u306F entity \u3092\u7279\u5B9A\u3059\u308B</li><li>key \u306F\u4EE5\u4E0B\u3092\u542B\u3080 <ul><li>entity \u306E kind</li><li>\u4EE5\u4E0B\u306E\u3044\u305A\u308C\u304B\u306E\u8B58\u5225\u5B50 <ul><li>\u6587\u5B57\u5217\u306E key name</li><li>\u6570\u5024\u306E ID</li></ul></li><li>ancestor path (optional)</li></ul></li><li>\u8B58\u5225\u5B50\u306F entity \u304C\u751F\u6210\u3055\u308C\u305F\u30BF\u30A4\u30DF\u30F3\u30B0\u3067\u8A2D\u5B9A\u3055\u308C\u308B</li><li>\u4E00\u5EA6\u8A2D\u5B9A\u3055\u308C\u305F\u8B58\u5225\u5B50\u306F\u5909\u66F4\u3055\u308C\u306A\u3044</li><li>\u8B58\u5225\u5B50\u306F\u4EE5\u4E0B\u306E2\u3064\u306E\u65B9\u6CD5\u3067\u8A2D\u5B9A\u3067\u304D\u308B <ul><li>\u30A2\u30D7\u30EA\u30B1\u30FC\u30B7\u30E7\u30F3\u3067\u7279\u5B9A\u306E key name \u3092\u8A2D\u5B9A\u3059\u308B</li><li>Datastore \u304C\u81EA\u52D5\u3067\u767A\u884C\u3059\u308B\u6570\u5024\u306E ID \u3092\u4F7F\u3046</li></ul></li></ul><h2 id="ancestor-paths" tabindex="-1"><a class="header-anchor" href="#ancestor-paths" aria-hidden="true">#</a> Ancestor paths</h2><ul><li>Datastore \u306F\u30D5\u30A1\u30A4\u30EB\u30B7\u30B9\u30C6\u30E0\u306E\u30C7\u30A3\u30EC\u30AF\u30C8\u30EA\u69CB\u6210\u306B\u4F3C\u305F\u968E\u5C64\u69CB\u9020\u3092\u3082\u3064</li><li>entity \u4F5C\u6210\u6642\u306B parent entity \u3092\u6307\u5B9A\u3059\u308B\u3053\u3068\u304C\u3067\u304D\u308B</li><li>parent entity \u304C\u6307\u5B9A\u3055\u308C\u306A\u3044 entity \u306F root entity \u3068\u547C\u3076</li><li>\u4E00\u5EA6\u89AA\u5B50\u95A2\u4FC2\u304C\u3067\u304D\u305F entity \u306F\u305D\u306E\u95A2\u4FC2\u304C\u5909\u66F4\u3055\u308C\u308B\u3053\u3068\u306F\u306A\u3044</li><li>\u540C\u3058 parent \u3092\u3082\u30642\u3064\u306E entity \u306B\u5BFE\u3057\u3066 Datastore \u306F\u540C\u4E00\u306E ID \u3092\u6255\u3044\u51FA\u3059\u3053\u3068\u306F\u306A\u3044</li><li>\u540C\u69D8\u306B2\u3064\u306E root entity \u306B\u5BFE\u3057\u3066\u540C\u4E00\u306E ID \u3092\u6255\u3044\u51FA\u3059\u3053\u3068\u3082\u306A\u3044</li><li>parent \u3084 parent \u306E\u66F4\u306B parent \u3092 ancestor \u3068\u547C\u3076</li><li>\u9006\u306B children \u3084 children \u306E\u66F4\u306B children \u3092 descendant \u3068\u547C\u3076</li><li>root entity \u3068\u305D\u306E descendant \u306F\u540C\u4E00\u306E entity group \u306B\u5C5E\u3059\u308B</li><li>ancestor path \u306F root entity \u304B\u3089\u305F\u3069\u3063\u3066\u8A72\u5F53\u306E entity \u306B\u5230\u9054\u3059\u308B\u307E\u3067\u306E\u89AA\u5B50\u95A2\u4FC2\u3067\u69CB\u6210\u3055\u308C\u308B</li></ul><h2 id="transactions-and-entity-groups" tabindex="-1"><a class="header-anchor" href="#transactions-and-entity-groups" aria-hidden="true">#</a> Transactions and entity groups</h2><ul><li>entity \u306B\u5BFE\u3059\u308B create, update, delete \u306F\u30C8\u30E9\u30F3\u30B6\u30AF\u30B7\u30E7\u30F3\u3067\u7BA1\u7406\u3055\u308C\u308B</li><li>\u30C8\u30E9\u30F3\u30B6\u30AF\u30B7\u30E7\u30F3\u306B\u306F\u3053\u308C\u3089\u306E\u8907\u6570\u306E\u64CD\u4F5C\u304C\u5185\u5305\u3055\u308C\u308B</li><li>\u30C8\u30E9\u30F3\u30B6\u30AF\u30B7\u30E7\u30F3\u306F\u4E00\u8CAB\u6027\u306E\u62C5\u4FDD\u306E\u305F\u3081\u3001\u305D\u3053\u306B\u542B\u307E\u308C\u308B\u64CD\u4F5C\u3092\u3072\u3068\u307E\u3068\u307E\u308A\u3068\u3057\u3066\u9069\u7528\u3059\u308B\u3001\u3042\u308B\u3044\u306F\u3044\u305A\u308C\u304B\u306E\u64CD\u4F5C\u304C\u5931\u6557\u3059\u308B\u3068\u3059\u3079\u3066\u306E\u64CD\u4F5C\u3092\u9069\u7528\u3057\u306A\u3044</li><li>commit \u3092\u8A66\u307F\u3066\u30A8\u30E9\u30FC\u304C\u8FD4\u3063\u3066\u304D\u305F\u3068\u3057\u3066\u3082\u3001\u30C8\u30E9\u30F3\u30B6\u30AF\u30B7\u30E7\u30F3\u304C\u5931\u6557\u3057\u305F\u3068\u306F\u9650\u3089\u306A\u3044 <ul><li><code>DatastoreTimeoutException</code> \u3084 <code>DatastoreFailureException</code> \u3068\u3044\u3063\u305F\u30A8\u30E9\u30FC\u304C\u8FD4\u3063\u3066\u304D\u305F\u3068\u3057\u3066\u3082\u3001 commit \u306F\u6210\u529F\u3057\u3066\u3044\u308B\u53EF\u80FD\u6027\u304C\u3042\u308B</li><li>\u3053\u306E\u305F\u3081\u3001 Datastore \u306F\u53EF\u80FD\u306A\u9650\u308A\u540C\u4E00\u306E\u30C8\u30E9\u30F3\u30B6\u30AF\u30B7\u30E7\u30F3\u3092\u8907\u6570\u56DE\u9069\u7528\u3057\u3066\u3082\u6700\u7D42\u7684\u306A\u7D50\u679C\u304C\u5909\u308F\u3089\u306A\u3044\u3088\u3046\u306B\u8A2D\u8A08\u3059\u3079\u304D\u3067\u3042\u308B</li></ul></li><li>entity group \u3068\u30C8\u30E9\u30F3\u30B6\u30AF\u30B7\u30E7\u30F3\u306E\u95A2\u4FC2 <ul><li>1\u3064\u306E\u30C8\u30E9\u30F3\u30B6\u30AF\u30B7\u30E7\u30F3\u3067\u6271\u3046\u30C7\u30FC\u30BF\u306F 25 \u306E entity group \u5185\u306B\u53CE\u307E\u3063\u3066\u3044\u306A\u3051\u308C\u3070\u306A\u3089\u306A\u3044</li><li>\u30C8\u30E9\u30F3\u30B6\u30AF\u30B7\u30E7\u30F3\u5185\u3067\u30AF\u30A8\u30EA\u3092\u767A\u884C\u3059\u308B\u5834\u5408\u306B\u306F\u6B63\u3057\u3044\u30C7\u30FC\u30BF\u306B\u30DE\u30C3\u30C1\u3059\u308B ancestor filter \u3092\u6307\u5B9A\u3067\u304D\u308B\u3088\u3046\u306B entity group \u5185\u306E\u30C7\u30FC\u30BF\u3092\u8A2D\u8A08\u3059\u308B\u5FC5\u8981\u304C\u3042\u308B</li><li>\u5E83\u57DF\u306B\u6E21\u3063\u3066\u5404 entity group \u3092\u30EC\u30D7\u30EA\u30B1\u30FC\u30B7\u30E7\u30F3\u3059\u308B\u305F\u3081\u306B\u30011\u3064\u306E entity group \u3054\u3068\u306B1\u79D2\u3042\u305F\u308A\u306E\u66F8\u304D\u8FBC\u307F\u30B9\u30EB\u30FC\u30D7\u30C3\u30C8\u306E\u4E0A\u9650\u5024\u304C\u5B9A\u3081\u3089\u308C\u3066\u3044\u308B</li></ul></li></ul><h2 id="understanding-write-costs" tabindex="-1"><a class="header-anchor" href="#understanding-write-costs" aria-hidden="true">#</a> Understanding write costs</h2><ul><li>\u767A\u751F\u3059\u308B\u66F8\u304D\u8FBC\u307F <ul><li>entity \u81EA\u8EAB</li><li><code>EntitiesByKind</code> \u3068\u3044\u3046 index</li><li>1\u3064\u306E property value \u3054\u3068\u306B <code>EntitiesByProperty</code> \u3068 <code>EntitiesByPropertyDesc</code> \u306E\u5404 index</li></ul></li></ul><p>\u4EE5\u4E0B\u306E\u3088\u3046\u306A entity \u3092\u8003\u3048\u308B</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Key: &#39;Foo:1&#39; (kind = &#39;Foo&#39;, id = 1, no parent)
A: 1, 2
B: null
C: &#39;this&#39;, &#39;that&#39;, &#39;theOther&#39;
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u3053\u306E\u3068\u304D\u767A\u751F\u3059\u308B\u66F8\u304D\u8FBC\u307F</p><ul><li>1: entity \u81EA\u8EAB</li><li>1: <code>EntitiesByKind</code> index</li><li>4: A property \u306E2\u3064\u306E\u5024\u306B\u305D\u308C\u305E\u308C2\u3064\u306E index</li><li>2: B property \u306E\u5024\u306B2\u3064\u306E index \uFF08null \u3067\u3082\u5FC5\u8981\uFF09</li><li>6: C property \u306E3\u3064\u306E\u5024\u306B\u305D\u308C\u305E\u308C2\u3064\u306E index</li></ul><p>\u3088\u3063\u3066\u767A\u751F\u3059\u308B\u66F8\u304D\u8FBC\u307F\u306E\u5408\u8A08\u306F 1 + 1 + 4 + 2 + 6 = 14</p><p>\u4E0A\u8A18\u306E entity \u306B\u8907\u5408 index \u3092\u8FFD\u52A0\u3059\u308B\u3053\u3068\u3092\u8003\u3048\u308B</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Kind: &#39;Foo&#39;
A \u25B2, B \u25BC, C \u25BC
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u3053\u306E\u3068\u304D\u3001\u5404 property \u306E\u5024\u306E\u7D44\u307F\u5408\u308F\u305B\u5206\u306E\u66F8\u304D\u8FBC\u307F\u304C\u767A\u751F\u3059\u308B</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>(1, null, &#39;this&#39;) (1, null, &#39;that&#39;) (1, null, &#39;theOther&#39;)
(2, null, &#39;this&#39;) (2, null, &#39;that&#39;) (2, null, &#39;theOther&#39;)
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u3057\u305F\u304C\u3063\u3066\u767A\u751F\u3059\u308B\u66F8\u304D\u8FBC\u307F\u306E\u5408\u8A08\u306F 1 + 1 + 4 + 2 + 6 + 6 = 20</p><p>\u6B21\u306B\u3053\u308C\u307E\u3067\u3068\u540C\u69D8\u306B ancestor \u304C\u5B58\u5728\u3059\u308B\u4EE5\u4E0B\u306E\u3088\u3046\u306A entity \u3092\u8003\u3048\u308B</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Key: &#39;GreatGrandpa:1/Grandpa:1/Dad:1/Foo:1&#39; (kind = &#39;Foo&#39;, id = 1, parent = &#39;GreatGrandpa:1/Grandpa:1/Dad:1&#39;)
A: 1, 2
B: null
C: &#39;this&#39;, &#39;that&#39;, &#39;theOther&#39;
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Kind: &#39;Foo&#39;
A \u25B2, B \u25BC, C \u25BC
Ancestor: True
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u3053\u306E\u3068\u304D\u5404 property \u306E\u5024\u3068\u5404 ancestor \u53CA\u3073\u81EA\u8EAB\u306E entity \u306E\u7D44\u307F\u5408\u308F\u305B\u5206\u306E\u66F8\u304D\u8FBC\u307F\u3092\u5FC5\u8981\u3068\u3059\u308B</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>(1, null, &#39;this&#39;, &#39;GreatGrandpa&#39;) (1, null, &#39;this&#39;, &#39;Grandpa&#39;) (1, null, &#39;this&#39;, &#39;Dad&#39;) (1, null, &#39;this&#39;, &#39;Foo&#39;)
(1, null, &#39;that&#39;, &#39;GreatGrandpa&#39;) (1, null, &#39;that&#39;, &#39;Grandpa&#39;) (1, null, &#39;that&#39;, &#39;Dad&#39;) (1, null, &#39;that&#39;, &#39;Foo&#39;)
(1, null, &#39;theOther&#39;, &#39;GreatGrandpa&#39;) (1, null, &#39;theOther&#39;, &#39;Grandpa&#39;) (1, null, &#39;theOther&#39;, &#39;Dad&#39;) (1, null, &#39;theOther&#39;, &#39;Foo&#39;)
(2, null, &#39;this&#39;, &#39;GreatGrandpa&#39;) (2, null, &#39;this&#39;, &#39;Grandpa&#39;) (2, null, &#39;this&#39;, &#39;Dad&#39;) (2, null, &#39;this&#39;, &#39;Foo&#39;)
(2, null, &#39;that&#39;, &#39;GreatGrandpa&#39;) (2, null, &#39;that&#39;, &#39;Grandpa&#39;) (2, null, &#39;that&#39;, &#39;Dad&#39;) (2, null, &#39;that&#39;, &#39;Foo&#39;)
(2, null, &#39;theOther&#39;, &#39;GreatGrandpa&#39;) (2, null, &#39;theOther&#39;, &#39;Grandpa&#39;) (2, null, &#39;theOther&#39;, &#39;Dad&#39;) (2, null, &#39;theOther&#39;, &#39;Foo&#39;)
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>\u3057\u305F\u304C\u3063\u3066\u767A\u751F\u3059\u308B\u66F8\u304D\u8FBC\u307F\u306E\u5408\u8A08\u306F 1 + 1 + 4 + 2 + 6 + 24 = 38</p><h2 id="\u53C2\u7167" tabindex="-1"><a class="header-anchor" href="#\u53C2\u7167" aria-hidden="true">#</a> \u53C2\u7167</h2>`,34),c={href:"https://cloud.google.com/appengine/docs/java/datastore/",target:"_blank",rel:"noopener noreferrer"},h=a("Cloud Datastore Overview"),b={href:"https://cloud.google.com/appengine/docs/java/datastore/entities",target:"_blank",rel:"noopener noreferrer"},y=a("Entities, Properties, and Keys");function m(g,x){const t=l("ExternalLinkIcon");return i(),r(s,null,[u,e("ul",null,[e("li",null,[e("a",c,[h,n(t)])]),e("li",null,[e("a",b,[y,n(t)])])])],64)}var _=o(p,[["render",m]]);export{_ as default};
